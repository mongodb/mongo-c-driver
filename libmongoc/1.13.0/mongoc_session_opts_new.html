
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
      {'gtm.start': new Date().getTime(),event:'gtm.js'}
    );var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-JQHP');
</script><link rel="canonical" href="http://mongoc.org/libbson/current/mongoc_session_opts_new.html"/>
    <title>mongoc_session_opts_new() &#8212; MongoDB C Driver 1.13.0</title>
    <link rel="stylesheet" href="_static/mongoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mongoc_session_opts_get_causal_consistency()" href="mongoc_session_opts_get_causal_consistency.html" />
    <link rel="prev" title="mongoc_session_opt_t" href="mongoc_session_opt_t.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>  

    <div class="document">
  <div class="documentwrapper">
    <div class="bodywrapper" id="mongoc_session_opts_new">
      <div class="body" role="main">
        
            <div class="related">
              <ul>
                <li class="nav-item nav-item-0"><a href="index.html">MongoDB C Driver 1.13.0</a> &#187;</li>
                
                  <li class="nav-item nav-item-1"><a href="api.html">API Reference</a> &#187;</li>
                
                  <li class="nav-item nav-item-2"><a href="mongoc_session_opt_t.html">mongoc_session_opt_t</a></li>
                
              </ul>
            </div>
          
        
  <div class="section" id="mongoc-session-opts-new">
<h1>mongoc_session_opts_new()<a class="headerlink" href="#mongoc-session-opts-new" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">mongoc_session_opt_t</span> <span class="o">*</span>
<span class="nf">mongoc_session_opts_new</span> <span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p>Start a session with <a class="symbol reference internal" href="mongoc_client_start_session.html"><span class="doc">mongoc_client_start_session()</span></a>, use the session for a sequence of operations and multi-document transactions, then free it with <a class="symbol reference internal" href="mongoc_client_session_destroy.html"><span class="doc">mongoc_client_session_destroy()</span></a>. Any <a class="symbol reference internal" href="mongoc_cursor_t.html"><span class="doc">mongoc_cursor_t</span></a> or <a class="symbol reference internal" href="mongoc_change_stream_t.html"><span class="doc">mongoc_change_stream_t</span></a> using a session must be destroyed before the session, and a session must be destroyed before the <a class="symbol reference internal" href="mongoc_client_t.html"><span class="doc">mongoc_client_t</span></a> it came from.</p>
<p>By default, sessions are <a class="reference external" href="http://dochub.mongodb.org/core/causal-consistency">causally consistent</a>. To disable causal consistency, before starting a session create a <a class="symbol reference internal" href="mongoc_session_opt_t.html"><span class="doc">mongoc_session_opt_t</span></a> with <a class="symbol reference internal" href="#"><span class="doc">mongoc_session_opts_new()</span></a> and call <a class="symbol reference internal" href="mongoc_session_opts_set_causal_consistency.html"><span class="doc">mongoc_session_opts_set_causal_consistency()</span></a>, then free the struct with <a class="symbol reference internal" href="mongoc_session_opts_destroy.html"><span class="doc">mongoc_session_opts_destroy()</span></a>.</p>
<p>Unacknowledged writes are prohibited with sessions.</p>
<p>A <a class="symbol reference internal" href="mongoc_client_session_t.html"><span class="doc">mongoc_client_session_t</span></a> must be used by only one thread at a time. Due to session pooling, <a class="symbol reference internal" href="mongoc_client_start_session.html"><span class="doc">mongoc_client_start_session()</span></a> may return a session that has been idle for some time and is about to be closed after its idle timeout. Use the session within one minute of acquiring it to refresh the session and avoid a timeout.</p>
<p>See the example code for <a class="symbol reference internal" href="mongoc_session_opts_set_causal_consistency.html"><span class="doc">mongoc_session_opts_set_causal_consistency()</span></a>.</p>
<div class="section" id="taglist">
<h3>See Also:<a class="headerlink" href="#taglist" title="Permalink to this headline">¶</a></h3>
<p></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_abort_transaction.html">mongoc_client_session_abort_transaction</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_advance_cluster_time.html">mongoc_client_session_advance_cluster_time</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_advance_operation_time.html">mongoc_client_session_advance_operation_time</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_commit_transaction.html">mongoc_client_session_commit_transaction</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_destroy.html">mongoc_client_session_destroy</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_get_client.html">mongoc_client_session_get_client</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_get_cluster_time.html">mongoc_client_session_get_cluster_time</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_get_lsid.html">mongoc_client_session_get_lsid</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_get_operation_time.html">mongoc_client_session_get_operation_time</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_get_opts.html">mongoc_client_session_get_opts</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_start_transaction.html">mongoc_client_session_start_transaction</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_session_t.html">mongoc_client_session_t</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_client_start_session.html">mongoc_client_start_session</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_session_opts_clone.html">mongoc_session_opts_clone</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_session_opts_destroy.html">mongoc_session_opts_destroy</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_session_opts_get_causal_consistency.html">mongoc_session_opts_get_causal_consistency</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_session_opts_get_default_transaction_opts.html">mongoc_session_opts_get_default_transaction_opts</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_session_opts_set_causal_consistency.html">mongoc_session_opts_set_causal_consistency</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_session_opts_set_default_transaction_opts.html">mongoc_session_opts_set_default_transaction_opts</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_clone.html">mongoc_transaction_opts_clone</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_destroy.html">mongoc_transaction_opts_destroy</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_get_read_concern.html">mongoc_transaction_opts_get_read_concern</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_get_read_prefs.html">mongoc_transaction_opts_get_read_prefs</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_get_write_concern.html">mongoc_transaction_opts_get_write_concern</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_new.html">mongoc_transaction_opts_new</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_set_read_concern.html">mongoc_transaction_opts_set_read_concern</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_set_read_prefs.html">mongoc_transaction_opts_set_read_prefs</a></p>
<p class="tag-source"><a class="reference internal" href="mongoc_transaction_opts_set_write_concern.html">mongoc_transaction_opts_set_write_concern</a></p>
</div>
</div>
</div>


      </div>
      <div class="footer">
        <div class="footer-nav">
          <a class="footer-nav-button footer-nav-button-prev" title="mongoc_session_opt_t" href="mongoc_session_opt_t.html">&laquo; Previous: mongoc_session_opt_t</a>
          <a class="footer-nav-button footer-nav-button-next" title="mongoc_session_opts_get_causal_consistency()" href="mongoc_session_opts_get_causal_consistency.html">Next: mongoc_session_opts_get_causal_consistency() &raquo;</a>
        </div>
      </div>
    </div>
  </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3><a href="index.html">MongoDB C Driver 1.13.0</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing the MongoDB C Driver (libmongoc) and BSON library (libbson)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic-troubleshooting.html">Basic Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guides.html">Guides</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="init-cleanup.html">Initialization and cleanup</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Error Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle.html">Object Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_bulk_operation_t.html">mongoc_bulk_operation_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_change_stream_t.html">mongoc_change_stream_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_client_pool_t.html">mongoc_client_pool_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_client_session_t.html">mongoc_client_session_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_client_t.html">mongoc_client_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_collection_t.html">mongoc_collection_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_cursor_t.html">mongoc_cursor_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_database_t.html">mongoc_database_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_delete_flags_t.html">mongoc_delete_flags_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_find_and_modify_opts_t.html">mongoc_find_and_modify_opts_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_gridfs_file_list_t.html">mongoc_gridfs_file_list_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_gridfs_file_opt_t.html">mongoc_gridfs_file_opt_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_gridfs_file_t.html">mongoc_gridfs_file_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_gridfs_t.html">mongoc_gridfs_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_host_list_t.html">mongoc_host_list_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_index_opt_geo_t.html">mongoc_index_opt_geo_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_index_opt_t.html">mongoc_index_opt_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_index_opt_wt_t.html">mongoc_index_opt_wt_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_insert_flags_t.html">mongoc_insert_flags_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_iovec_t.html">mongoc_iovec_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_matcher_t.html">mongoc_matcher_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_query_flags_t.html">mongoc_query_flags_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_rand.html">mongoc_rand</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_read_concern_t.html">mongoc_read_concern_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_read_mode_t.html">mongoc_read_mode_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_read_prefs_t.html">mongoc_read_prefs_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_remove_flags_t.html">mongoc_remove_flags_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_reply_flags_t.html">mongoc_reply_flags_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_server_description_t.html">mongoc_server_description_t</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="mongoc_session_opt_t.html">mongoc_session_opt_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_socket_t.html">mongoc_socket_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_ssl_opt_t.html">mongoc_ssl_opt_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_stream_buffered_t.html">mongoc_stream_buffered_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_stream_file_t.html">mongoc_stream_file_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_stream_socket_t.html">mongoc_stream_socket_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_stream_t.html">mongoc_stream_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_stream_tls_t.html">mongoc_stream_tls_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_topology_description_t.html">mongoc_topology_description_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_transaction_opt_t.html">mongoc_transaction_opt_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_update_flags_t.html">mongoc_update_flags_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_uri_t.html">mongoc_uri_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_version.html">Version Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongoc_write_concern_t.html">mongoc_write_concern_t</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="application-performance-monitoring.html">Application Performance Monitoring (APM)</a></li>
</ul>

<ul>
  <li class="toctree-l1 ">
    <a href="full_index.html">Index</a>
  </li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="colophon">
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.0, based on <a href="https://sphinx-readable-theme.readthedocs.io/en/latest/">Sphinx Readable Theme</a>.
  </div>

  </body>
</html>